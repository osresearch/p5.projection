<!DOCTYPE html>
<html>
  <head>
<title>Projection mapped cube demo - p5.projection</title>
<meta property="og:title" content="Projection mapped cube demo">
<meta property="og:site_name" content="p5.projection">
<meta property="og:url" content="https://osresearch.github.io/p5.projection/examples/chessboard.html">
<meta property="og:description" content="Demo of the projection mapping library for p5js showing how to use multiple surfaces.">
<meta property="og:image" content="https://osresearch.github.io/p5.projection/images/chessboard.png">

    <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>
    <style> body {padding: 0; margin: 0;} </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.1/math.js"></script>
    <script src="../library/p5.projection.js"></script>
  </head>
<a href="../">Back to the p5.projection overview</a>
  <body>
<script>
let font;

// three faces for a cube 800x800 
let square = [[0,0], [0,800], [800,0], [800,800]];
let mat0 = new ProjectionMatrix([[0,-400], [-200,-200], [+200,-200], [0,0]], square);
let mat1 = new ProjectionMatrix([[-200,-200], [-200,400], [0,0], [0,500]], square);
let mat2 = new ProjectionMatrix([[0,0], [0,500], [+200,-200], [+200,+400]], square);

function preload()
{
	font = loadFont("../assets/Inconsolata-Regular.ttf");
}

function setup()
{
	frameRate(25);
	createCanvas(windowWidth-10, windowHeight-10, WEBGL);
	background(255);
}

function draw_checkerboard()
{
	// draw some text to show that it is also affected by the rendering
	push()
	textFont(font, 120);
	noStroke();
	fill(255,0,0);
	rotate(45 * PI/180);
	translate(0,0,10);
	text("Projection test", 100, 50);
	pop();

	// draw a checkerboard pattern that fills the 800x800
	push();

	stroke(100);
	noFill();
	rect(0, 0, 800, 800);

	noStroke();
	fill(255);
	for(let y=0 ; y < 8 ; y++)
		for(let x = (y&1) ; x < 8 ; x+=2)
			rect(x*100, y*100, 100, 100);
	pop();
}

function draw()
{
	background(0);

	// apply the translation matrix with debug turned on
	push();
	mat0.apply(1);
	draw_checkerboard();
	pop();

	push();
	mat1.apply(1);
	draw_checkerboard();
	pop();

	push();
	mat2.apply(1);
	draw_checkerboard();
	pop();

}


function mouseDragged()
{
	if (mat0.hit >= 0)
		mat0.mouseDragged(mat0.hit);
	if (mat1.hit >= 0)
		mat1.mouseDragged(mat1.hit);
	if (mat2.hit >= 0)
		mat2.mouseDragged(mat2.hit);
}


</script>
  </body>
</html>
